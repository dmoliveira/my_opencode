# v2.0 Flow Wave Plan

## Goal

Define the next flow-upgrade wave focused on release governance, automation reliability, and operator ergonomics.

## Status Legend

- [ ] pending
- [-] in progress
- [x] done
- [!] blocked

## Validation Gates

- `make validate`
- `make selftest`
- `make install-test`
- `pre-commit run --all-files`

## Worklog

| UTC | Task | Status | Notes |
|---|---|---|---|
| 2026-03-01T11:05:00Z | Plan scaffold | done | Opened v2.0 tracking document with scoped epics and validation gates. |
| 2026-03-01T11:10:00Z | E1 schema policy doc | done | Added publish summary schema policy and compatibility/deprecation expectations at `docs/specs/publish-summary-schema-policy.md`. |
| 2026-03-01T11:10:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E1 docs slice. |
| 2026-03-01T11:20:00Z | E1 selftest schema guardrails | done | Added checksum recomputation assertions for persisted dry-run and confirmation summary artifacts. |
| 2026-03-01T11:20:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E1 selftest slice. |
| 2026-03-01T11:30:00Z | E2 tag conflict preflight | done | Added publish preflight failure path for conflicting local tags with deterministic reason code `publish_tag_already_exists`. |
| 2026-03-01T11:30:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E2 tag preflight slice. |
| 2026-03-01T11:40:00Z | E2 dry-run action matrix | done | Added explicit action matrix output for dry-run publish plans and updated selftest coverage for planned/skipped statuses. |
| 2026-03-01T11:40:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E2 dry-run matrix slice. |
| 2026-03-01T11:55:00Z | E5 release automation runbook | done | Added canonical release milestone automation runbook, lightweight docs-only checklist, and v0.4.x cadence examples. |
| 2026-03-01T11:55:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E5 docs slice. |
| 2026-03-01T12:05:00Z | E2 release-tag preflight reason codes | done | Added deterministic `publish_release_tag_missing` preflight failure when create-release is requested without creating or pre-existing tag. |
| 2026-03-01T12:05:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E2 preflight-reason-code slice. |
| 2026-03-01T12:20:00Z | E3 follow-up linkage governance | done | Added machine-readable follow-up linkage summary and deterministic complete/incomplete reason codes for `/hotfix postmortem`, with edge-case selftest coverage. |
| 2026-03-01T12:25:00Z | E5 automated wiki and Pages | done | Added docs automation workflow to sync GitHub Wiki and deploy GitHub Pages docs hub, including support banner and badges. |
| 2026-03-01T12:25:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for E3/E5 automation slice. |
| 2026-03-01T12:40:00Z | E4 reviewer policy diagnostics | done | Unified reviewer policy diagnostics across `/ship` and `/review`, including shared conflict detection and doctor guidance. |
| 2026-03-01T12:40:00Z | E4 regression coverage | done | Added selftest regression cases for overlapping allow/deny reviewer policy conflict behavior across `/ship create-pr` and `/review doctor`. |
| 2026-03-01T12:40:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for E4 reviewer-policy slice. |
| 2026-03-01T12:20:00Z | Wave closure docs | done | Added completion artifact at `docs/plan/v2.0-flow-wave-completion.md` to capture closed scope and merged PR evidence. |

## Epics

### E1 Publish artifact schema evolution

- [x] Add explicit schema changelog policy for publish summary artifacts
- [x] Define backward-compatibility guarantees and deprecation windows
- [x] Add selftest coverage for schema evolution guardrails

### E2 Release-train safety rails

- [x] Add preflight checks for conflicting tags/releases before publish
- [x] Add clearer dry-run action matrix for tag/release operations
- [x] Add deterministic failure reason codes for publish gating errors

### E3 Hotfix and follow-up governance

- [x] Add validation for postmortem-follow-up linkage completeness
- [x] Add machine-readable follow-up status summary output
- [x] Add selftest coverage for follow-up open/link edge paths

### E4 Review and ship policy consistency

- [x] Align reviewer policy diagnostics across `/ship` and `/review` surfaces
- [x] Add policy misconfiguration doctor guidance and fix hints
- [x] Add regression tests for allow/deny conflict resolution

### E5 Release milestone automation docs

- [x] Add canonical runbook for milestone changelog + release-note generation
- [x] Define lightweight release checklist for docs-only milestones
- [x] Capture examples for v0.4.x-style release cadence
