# v2.0 Flow Wave Plan

## Goal

Define the next flow-upgrade wave focused on release governance, automation reliability, and operator ergonomics.

## Status Legend

- [ ] pending
- [-] in progress
- [x] done
- [!] blocked

## Validation Gates

- `make validate`
- `make selftest`
- `make install-test`
- `pre-commit run --all-files`

## Worklog

| UTC | Task | Status | Notes |
|---|---|---|---|
| 2026-03-01T11:05:00Z | Plan scaffold | done | Opened v2.0 tracking document with scoped epics and validation gates. |
| 2026-03-01T11:10:00Z | E1 schema policy doc | done | Added publish summary schema policy and compatibility/deprecation expectations at `docs/specs/publish-summary-schema-policy.md`. |
| 2026-03-01T11:10:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E1 docs slice. |
| 2026-03-01T11:20:00Z | E1 selftest schema guardrails | done | Added checksum recomputation assertions for persisted dry-run and confirmation summary artifacts. |
| 2026-03-01T11:20:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E1 selftest slice. |
| 2026-03-01T11:30:00Z | E2 tag conflict preflight | done | Added publish preflight failure path for conflicting local tags with deterministic reason code `publish_tag_already_exists`. |
| 2026-03-01T11:30:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E2 tag preflight slice. |
| 2026-03-01T11:40:00Z | E2 dry-run action matrix | done | Added explicit action matrix output for dry-run publish plans and updated selftest coverage for planned/skipped statuses. |
| 2026-03-01T11:40:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for the E2 dry-run matrix slice. |

## Epics

### E1 Publish artifact schema evolution

- [x] Add explicit schema changelog policy for publish summary artifacts
- [x] Define backward-compatibility guarantees and deprecation windows
- [x] Add selftest coverage for schema evolution guardrails

### E2 Release-train safety rails

- [-] Add preflight checks for conflicting tags/releases before publish
- [x] Add clearer dry-run action matrix for tag/release operations
- [ ] Add deterministic failure reason codes for publish gating errors

### E3 Hotfix and follow-up governance

- [ ] Add validation for postmortem-follow-up linkage completeness
- [ ] Add machine-readable follow-up status summary output
- [ ] Add selftest coverage for follow-up open/link edge paths

### E4 Review and ship policy consistency

- [ ] Align reviewer policy diagnostics across `/ship` and `/review` surfaces
- [ ] Add policy misconfiguration doctor guidance and fix hints
- [ ] Add regression tests for allow/deny conflict resolution

### E5 Release milestone automation docs

- [ ] Add canonical runbook for milestone changelog + release-note generation
- [ ] Define lightweight release checklist for docs-only milestones
- [ ] Capture examples for v0.4.x-style release cadence
