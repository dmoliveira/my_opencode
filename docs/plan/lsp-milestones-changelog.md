# LSP Milestones Changelog

This document is the consolidated changelog for the LSP delivery stream in `my_opencode`.

## Timeline

| Milestone                           | Scope                                                                                            | PR                                                         | Merged At (UTC)      | Merge Commit                               |
| ----------------------------------- | ------------------------------------------------------------------------------------------------ | ---------------------------------------------------------- | -------------------- | ------------------------------------------ |
| LSP command baseline                | Added `/lsp` readiness/doctor/navigation/symbols/rename workflows and initial docs/tests         | [#229](https://github.com/dmoliveira/my_opencode/pull/229) | 2026-02-18T11:53:31Z | `a71b1c692501d7fd47b70c297b79f2243668a6fa` |
| Protocol-first execution            | Upgraded `/lsp` commands to try protocol calls first with deterministic text fallback            | [#231](https://github.com/dmoliveira/my_opencode/pull/231) | 2026-02-18T12:23:23Z | `76b7087c00caa38c3a9f3356d374b2ef746b5afd` |
| `documentChanges` text edits        | Added `workspaceEdit.documentChanges[*].textDocument + edits` support                            | [#232](https://github.com/dmoliveira/my_opencode/pull/232) | 2026-02-18T20:17:23Z | `91d26ef4c25816c31a60504cd447bc1654e19ee2` |
| Resource operation safety           | Parsed resource operations (`rename/create/delete file`) and blocked apply when present          | [#233](https://github.com/dmoliveira/my_opencode/pull/233) | 2026-02-18T21:06:48Z | `545f03832d75ce4e6ea39a739907f735fb215667` |
| Annotation confirmation policy      | Parsed `changeAnnotations`/`annotationId` and blocked apply for confirmation-required edits      | [#234](https://github.com/dmoliveira/my_opencode/pull/234) | 2026-02-18T21:14:36Z | `a29fe194b848eea8301e87b34c2a05fdc5e92942` |
| Deterministic mock protocol harness | Added mock JSON-RPC LSP fixture + integration selftest coverage                                  | [#235](https://github.com/dmoliveira/my_opencode/pull/235) | 2026-02-18T22:08:50Z | `cb6b85e7c6fc1c3f3ff743a4cc0542bbbf04d0a8` |
| Backend observability metadata      | Added `backend_details` across `/lsp` JSON outputs                                               | [#238](https://github.com/dmoliveira/my_opencode/pull/238) | 2026-02-18T22:24:59Z | `0cd1a2c7e4f07fb2dd0ac32d1f953d1afaa29e64` |
| Dry-run diff preview                | Added per-file unified diff previews in `/lsp rename` dry-run JSON output                        | [#239](https://github.com/dmoliveira/my_opencode/pull/239) | 2026-02-18T22:45:02Z | `ab28cbd91282303d609c6c00bdf52f5546a23af5` |
| Guarded renamefile apply            | Added opt-in apply path for safe `RenameFile` operations and validation helpers                  | [#242](https://github.com/dmoliveira/my_opencode/pull/242) | 2026-02-18T23:39:06Z | `4832f7ded4298c8a844d0509fda5ece6e8bbd80e` |
| Diff review thresholds              | Added `max_diff_files` and `max_diff_lines` blockers before `/lsp rename --apply`                | [#243](https://github.com/dmoliveira/my_opencode/pull/243) | 2026-02-19T01:17:01Z | `47ee1e52569e7efe3399880c4140a69d4ea4baf4` |
| Verbose capability probing          | Added `/lsp doctor --verbose` command-level capability matrix and summary reporting              | [#246](https://github.com/dmoliveira/my_opencode/pull/246) | 2026-02-19T02:32:17Z | `dedbb8641f6d5454269fab2e88aa374772f8f5af` |
| Capability preflight execution      | Added command capability preflight checks before protocol calls with fallback reason codes       | [#254](https://github.com/dmoliveira/my_opencode/pull/254) | 2026-02-19T03:45:06Z | `0d95f406b6aa21be38f7c19839cb78a91ae73281` |
| Diagnostics baseline                | Added `/lsp diagnostics --scope` baseline JSON output with severity summary and backend metadata | [#262](https://github.com/dmoliveira/my_opencode/pull/262) | 2026-02-19T05:01:42Z | `75be2d8877791a4140ec59b7146776ed7c2f477d` |
| Code-actions dry-run baseline       | Added `/lsp code-actions` listing with deterministic dry-run JSON report                         | [#264](https://github.com/dmoliveira/my_opencode/pull/264) | 2026-02-19T05:11:49Z | `58fa767bd04fd4b26d550d76be2e495ed6636024` |
| Code-actions guarded apply          | Added guarded `/lsp code-actions --apply` for safe text-edit workspace edits                     | [#265](https://github.com/dmoliveira/my_opencode/pull/265) | 2026-02-19T05:22:16Z | `f98a41a1e97d1c913bce6882be2e01716629bcdb` |
| Capability warning hints            | Added explicit capability-missing warning hints in `/lsp` JSON and text outputs                  | [#266](https://github.com/dmoliveira/my_opencode/pull/266) | 2026-02-19T05:34:58Z | `03e7020fcfd946a1caf98389e95e5c0843fd33d5` |
| Diagnostics summary enrichment      | Added diagnostics summary source counts and top diagnostic codes for triage                      | [#267](https://github.com/dmoliveira/my_opencode/pull/267) | 2026-02-19T05:42:07Z | `89707c76f5239c1f9ba6bbf6ae625ab2c626cc7e` |
| Disabled code-action apply guard    | Blocked `/lsp code-actions --apply` for server-disabled actions with explicit blockers           | [#268](https://github.com/dmoliveira/my_opencode/pull/268) | 2026-02-19T05:49:40Z | `794bfec54be5595e498762cb48cd1765d9e2e73b` |
| Code-actions summary metadata       | Added code-action summary fields (`total`, `editable`, `disabled`, `by_kind`)                    | [#269](https://github.com/dmoliveira/my_opencode/pull/269) | 2026-02-19T05:57:45Z | `c9eb6ea09df6f59952e3032297f503b9d77c0518` |
| Code-actions kind filtering         | Added optional `/lsp code-actions --kind <prefix>` deterministic filtering                       | [#270](https://github.com/dmoliveira/my_opencode/pull/270) | 2026-02-19T06:05:27Z | `e23c285f705513e926207fde7e292ceb885b0028` |
| Capability preflight diagnostics    | Added deterministic selftest coverage for capability preflight reason codes and warning guidance | [#303](https://github.com/dmoliveira/my_opencode/pull/303) | 2026-02-24T10:10:52Z | `1f1ea642c6e1b5e821c93b279d6a4897b27ba9d7` |
| Resource operation guardrails       | Hardened rename resource-op policy/validation and added create/delete target previews            | [#304](https://github.com/dmoliveira/my_opencode/pull/304) | 2026-02-24T10:15:49Z | `ece4d9db4e0af94d2e31e3505388243b73fdaee4` |
| Diagnostics and actions schemas     | Added deterministic diagnostics/code-actions schema assertions in selftest                        | [#305](https://github.com/dmoliveira/my_opencode/pull/305) | 2026-02-24T10:20:06Z | `cec91bc2ad55a0d8a8aa8ca94854340869b29ec6` |

## Notes

- PR [#237](https://github.com/dmoliveira/my_opencode/pull/237) (initial backend details branch) was superseded by [#238](https://github.com/dmoliveira/my_opencode/pull/238) due branch freshness guard constraints during merge.
- Current protocol roadmap items through task 16 are complete in `docs/plan/lsp-protocol-upgrade.md`; next-wave implementation planning continues in `docs/plan/lsp-high-value-epics.md`.
