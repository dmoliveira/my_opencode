# v2.1 Flow Next Wave Plan

## Goal

Define the next flow-upgrade wave after v2.0 closure, focused on release scalability, artifact quality, and operator ergonomics.

## Status Legend

- pending
- in progress
- done
- blocked

## Validation Gates

- `make validate`
- `make selftest`
- `make install-test`
- `pre-commit run --all-files`

## Worklog

| UTC | Task | Status | Notes |
|---|---|---|---|
| 2026-03-01T14:10:00Z | Plan scaffold | done | Opened v2.1 planning document after run-closure completion, with scoped epics and validation baseline. |
| 2026-03-01T14:20:00Z | E1 profile presets implementation | done | Added `--profile docs-only|runtime` publish presets with explicit flag override behavior in `/release-train publish`. |
| 2026-03-01T14:20:00Z | E1 selftest coverage | done | Added selftest coverage for profile-driven dry-run action planning behavior. |
| 2026-03-01T14:20:00Z | E1 docs guidance | done | Updated runbook and command handbook with release profile selection guidance. |
| 2026-03-01T14:20:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for v2.1 E1 slice. |
| 2026-03-01T14:30:00Z | E2 provenance metadata block | done | Added explicit provenance metadata block to release rollup artifacts and payload output. |
| 2026-03-01T14:30:00Z | E2 provenance selftest checks | done | Added deterministic selftest assertions for provenance payload and markdown section emission. |
| 2026-03-01T14:30:00Z | E2 downstream migration notes | done | Added runbook guidance for downstream parsers consuming additive provenance metadata. |
| 2026-03-01T14:30:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for v2.1 E2 slice. |
| 2026-03-01T14:40:00Z | E5 rollup template and policy | done | Added wave-level rollup template and explicit runbook policy for release-wave closure and next-wave transition. |
| 2026-03-01T14:40:00Z | E5 release-index verification snippets | done | Added `make release-index-update` verification snippets and expected diff behavior guidance. |
| 2026-03-01T14:40:00Z | Validate gates | done | Passed `make validate`, `make selftest`, `make install-test`, and `pre-commit run --all-files` for v2.1 E5 docs slice. |

## Epics

### E1 Release train composability

- [x] Add reusable release-train profile presets for docs-only and runtime releases
- [x] Add selftest coverage for profile-driven publish planning behavior
- [x] Document profile selection guidance in runbook/handbook

### E2 Artifact provenance hardening

- [x] Add explicit provenance metadata block to generated release-note artifacts
- [x] Add deterministic provenance validation checks in selftest
- [x] Add migration notes for downstream consumers

### E3 Docs automation signal quality

- [ ] Add docs automation summary index page updates for each release cycle
- [ ] Add validation that wiki/pages automation output remains synchronized
- [ ] Add operator-facing troubleshooting guidance for docs automation failures

### E4 Plan hygiene automation

- [ ] Add lightweight checker to flag stale plan entries missing closure evidence links
- [ ] Add doctor/readiness command hint integration for plan hygiene findings
- [ ] Add regression tests for checker behavior across completed and active plans

### E5 Release cadence consolidation

- [x] Add periodic rollup doc template for grouping multiple v0.4.x-style releases
- [x] Add `release-index-update` runbook examples with verification snippets
- [x] Capture policy for ending a release wave and transitioning to next minor plan
