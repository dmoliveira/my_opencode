# v0.8 Governance and Audit Plan

## Goal

Add operational governance guardrails without changing canonical command names.

## Status Legend

- pending
- in progress
- done
- blocked

## Validation Gates

- `make validate`
- `make selftest`
- `make install-test`
- `pre-commit run --all-files`

## Worklog

| UTC | Task | Status | Notes |
|---|---|---|---|
| 2026-02-24T08:30:00Z | Plan scaffold | done | Next task after operator playbook merge. |
| 2026-02-24T08:45:00Z | E1 runtime audit trail | done | Added shared audit utility, `/audit` command, mutating event emission, docs, and selftest coverage. |
| 2026-02-24T09:45:00Z | E2 authorization profiles | done | Added `/governance` profiles/authorize/revoke and strict-operation gating with reason codes + override path. |
| 2026-02-24T10:20:00Z | E3 governance reporting | done | Added `/audit report --days <n>` trend summaries, docs updates, and selftest assertions for report payloads. |

## Epics

### E1 Runtime Audit Trail

- [x] Add shared runtime audit utility for append/list/export
- [x] Add canonical `/audit` command (`status|list|report|export|doctor`)
- [x] Emit audit events from mutating flows (`claims`, `workflow`, `delivery`, `daemon`)
- [x] Add docs + selftest coverage

### E2 Authorization Profiles (Next)

- [x] Add profile model (`off|balanced|strict`) for risky mutations
- [x] Gate execute/close/drain operations when strict policy blocks
- [x] Add override path and clear reason codes

### E3 Governance Reporting

- [x] Add trend summary report from audit trail
- [x] Add export-friendly governance report command

## Handoff Notes

- Keep canonical command philosophy.
- Every command change updates `opencode.json`, `docs/command-handbook.md`, and `scripts/selftest.py`.
